function #\hyperref[zcapStructToMemBitsonetwoeight]{capStructToMemBits128}#(cap) : CapStruct -> #\hyperref[zbits]{bits}#(128) =
    let b : #\hyperref[zbits]{bits}#(20) = if cap.sealed then (cap.B)[19..12] @ (cap.otype)[23..12] else cap.B in
    let t : #\hyperref[zbits]{bits}#(20) = if cap.sealed then (cap.T)[19..12] @ (cap.otype)[11..0]  else cap.T in
    ( cap.uperms
    @ #\hyperref[zgetCapHardPerms]{getCapHardPerms}#(cap)
    @ cap.reserved
    @ cap.E
    @ cap.sealed
    @ b
    @ t
    @ cap.address
    )
