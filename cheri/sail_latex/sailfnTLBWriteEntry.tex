function #\hyperref[zTLBWriteEntry]{TLBWriteEntry}#(idx) = {
  pagemask = TLBPageMask;
  match pagemask {
      0x0000  => (),
      0x0003  => (),
      0x000f  => (),
      0x003f  => (),
      0x00ff  => (),
      0x03ff  => (),
      0x0fff  => (),
      0x3fff  => (),
      0xffff  => (),
      _       => (#\hyperref[zSignalException]{SignalException}#(MCheck))
  };
  let i as atom(_) = #\hyperref[zunsigned]{unsigned}#(idx) in
  let entry = TLBEntries[i] in {
    entry.#\hyperref[zpagemask]{pagemask}#() = pagemask;
    entry.#\hyperref[zr]{r}#()        = TLBEntryHi.#\hyperref[zR]{R}#();
    entry.#\hyperref[zvpntwo]{vpn2}#()     = TLBEntryHi.#\hyperref[zVPNtwo]{VPN2}#();
    entry.#\hyperref[zasid]{asid}#()     = TLBEntryHi.#\hyperref[zASID]{ASID}#();
    entry.#\hyperref[zg]{g}#()        = ((TLBEntryLo0.#\hyperref[zG]{G}#()) & (TLBEntryLo1.#\hyperref[zG]{G}#()));
    entry.#\hyperref[zvalid]{valid}#()    = bitone;
    entry.#\hyperref[zcapszero]{caps0}#()    = TLBEntryLo0.#\hyperref[zCapS]{CapS}#();
    entry.#\hyperref[zcaplzero]{capl0}#()    = TLBEntryLo0.#\hyperref[zCapL]{CapL}#();
    entry.#\hyperref[zpfnzero]{pfn0}#()     = TLBEntryLo0.#\hyperref[zPFN]{PFN}#();
    entry.#\hyperref[zczero]{c0}#()       = TLBEntryLo0.#\hyperref[zC]{C}#();
    entry.#\hyperref[zdzero]{d0}#()       = TLBEntryLo0.#\hyperref[zD]{D}#();
    entry.#\hyperref[zvzero]{v0}#()       = TLBEntryLo0.#\hyperref[zV]{V}#();
    entry.#\hyperref[zcapsone]{caps1}#()    = TLBEntryLo1.#\hyperref[zCapS]{CapS}#();
    entry.#\hyperref[zcaplone]{capl1}#()    = TLBEntryLo1.#\hyperref[zCapL]{CapL}#();
    entry.#\hyperref[zpfnone]{pfn1}#()     = TLBEntryLo1.#\hyperref[zPFN]{PFN}#();
    entry.#\hyperref[zcone]{c1}#()       = TLBEntryLo1.#\hyperref[zC]{C}#();
    entry.#\hyperref[zdone]{d1}#()       = TLBEntryLo1.#\hyperref[zD]{D}#();
    entry.#\hyperref[zvone]{v1}#()       = TLBEntryLo1.#\hyperref[zV]{V}#();
  }
}
